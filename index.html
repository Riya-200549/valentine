<!DOCTYPE html>
<html>
<head>
<title>Valentine ğŸ’–</title>

<style>
body{
    text-align:center;
    font-family:Arial, sans-serif;
    background:#ffc2d1;
    overflow:hidden;
    transition:0.3s;
}

button{
    padding:10px 20px;
    font-size:16px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    margin:8px;
    /* position:absolute; */  /* <-- comment this line */
}


#yesBtn{
    background:#ff4d6d;
    color:white;
    position:absolute; /* only for main Yes button */
}

#noBtn{
    background:#444;
    color:white;
    position:absolute; /* only for main No button */
}


.hidden{
    display:none;
}

img{
    width:230px;
    border-radius:12px;
    margin-top:15px;
}

/* Shake Animation */
@keyframes shake {
  0% { transform: translate(0px, 0px); }
  25% { transform: translate(-8px, 0px); }
  50% { transform: translate(8px, 0px); }
  75% { transform: translate(-8px, 0px); }
  100% { transform: translate(0px, 0px); }
}
.shake{
  animation: shake 0.4s;
}
</style>
</head>

<body>

<h1 id="mainText">Will You Be My Valentine? ğŸ’–</h1>

<button id="yesBtn">Yes ğŸ’•</button>
<button id="noBtn">No ğŸ˜œ</button>

<div id="stage2" class="hidden">
    <h2>You are the best thing that ever happened to me ğŸ’–</h2>
    <div id="quiz"></div>
</div>

    <div id="playSongDiv" class="hidden" style="margin-top:15px;">
    <button id="playSongBtn">Play Ending Song ğŸµ</button>
</div>

<script>
let yesMoveCount = 0;

const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const stage2 = document.getElementById("stage2");
const mainText = document.getElementById("mainText");
const quiz = document.getElementById("quiz");

// Initial positions
yesBtn.style.left="40%";
yesBtn.style.top="50%";
yesBtn.style.display="block";

noBtn.style.left="55%";
noBtn.style.top="50%";
noBtn.style.display="block";

// Move button randomly
function moveButton(btn){
    btn.style.left = Math.random()*80 + "%";
    btn.style.top = Math.random()*80 + "%";
}

// Yes button hover
yesBtn.addEventListener("mouseover",()=>{
    if(yesMoveCount < 3){
        moveButton(yesBtn);
        yesMoveCount++;
    }
});

// No button hover
noBtn.addEventListener("mouseover",()=>{ moveButton(noBtn); });

// No button click reaction
noBtn.addEventListener("click",()=>{
    document.body.classList.add("shake");
    setTimeout(()=> document.body.classList.remove("shake"),400);
    alert("You can't say no! ğŸ’–");
});

// Yes button click -> start quiz (song only last question)
yesBtn.addEventListener("click",()=>{
    mainText.style.display="none";
    yesBtn.style.display="none";
    noBtn.style.display="none";
    stage2.classList.remove("hidden");
    startQuiz();
});

let questionIndex = 0;

// Quiz questions with alternating correct options
const questions = [
{
question:"Have you ever thought about leaving because of something I did?",
options:["Sometimes I feel hurt but I try to fix it","Sometimes I feel confused but I still stay"],
correctIndex:0,
image:"pic1.jpeg"
},
{
question:"Do you feel loved by me in the way you need?",
options:["I feel loved most of the time","I feel cared for but I need small changes"],
correctIndex:1,
image:"pic2.jpeg"
},
{
question:"What scares you most about being with me long-term?",
options:["Losing our connection slowly","Not growing together properly"],
correctIndex:0,
image:"pic7.jpeg"
},
{
question:"Do you ever feel like you change yourself for me?",
options:["I adjust small things but I am still me","I hide some feelings to avoid problems"],
correctIndex:1,
image:"pic4.jpeg"
},
{
question:"What scares you about building a future with me?",
options:["Not understanding each other deeply","Not putting equal effort always"],
correctIndex:0,
image:"pic5.jpeg"
},
{
question:"What emotional effort do you make in this relationship?",
options:["Trying to understand you better","Keeping some feelings to myself"],
correctIndex:1,
image:"pic6.jpeg"
}
];
function startQuiz(){
    if(questionIndex < questions.length){
        let q = questions[questionIndex];
        // Clear previous content
        quiz.innerHTML = `<h3>${q.question}</h3><div id="options"></div><div id="result"></div>`;
        const optionsDiv = document.getElementById("options");
        // Loop through options to create buttons
        q.options.forEach((opt, idx)=>{
            const btn = document.createElement("button");
            btn.textContent = opt;
            btn.onclick = ()=> checkAnswer(idx);
            optionsDiv.appendChild(btn);
        });
    }else{
        // Ending text + song
        quiz.innerHTML = `
        <h2>I choose you ğŸ¤</h2>
        <p style="font-size:18px; line-height:1.6;">
        Not because we are perfect. <br>
        But because we are willing to understand each other. <br>
        Today. Tomorrow. Always.
        </p>
        <img src="pic3.jpeg">
        `;
          playSongDiv.classList.remove("hidden");
    }

let endingSong = null; // global variable

function playEndingSong(){
    if(!endingSong){
        endingSong = new Audio('kidaithai.mp3'); // create once
    }
    endingSong.play().then(()=>{
        // Stop after 30 seconds
        setTimeout(()=>{
            endingSong.pause();
            endingSong.currentTime = 0;
        }, 30000);
    }).catch((e)=>{
        console.log("Song play failed, user interaction needed", e);
        alert("Click anywhere to play ending song");
    });
}






    }
}

function checkAnswer(option){
    let q = questions[questionIndex];
    let result = document.getElementById("result");

    if(option === q.correctIndex){
        result.innerHTML = `<p style="color:green;font-weight:bold;">Correct ğŸ’–</p><img src="${q.image}">`;
    }else{
        result.innerHTML = `<p style="color:red;font-weight:bold;">Wrong answer</p><h1>ğŸ˜’ ğŸ˜µ ğŸ¤• ğŸ˜µâ€ğŸ’«</h1>`;
        document.body.classList.add("shake");
        setTimeout(()=> document.body.classList.remove("shake"),400);
    }

    setTimeout(()=>{
        questionIndex++;
        startQuiz();
    },2000);
}
</script>

</body>
</html>










